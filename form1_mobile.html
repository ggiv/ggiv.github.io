<!DOCTYPE html>
<html lang='en'>
	<head>
		<meta charset='UTF-8'/>
		<title>Form1</title>
		<script>
			(function(){
			var formButton;
			var formFirstStage;
			var formSecondStage;
			var formMainForm;
			var errorMessage;
			var formStage=0;
			var formErrors=0;
			var secondStageErrorTrigger=false;
			var thankYouPage="http://www.au.golandscapequotes.com.au/success1"
			window.onload=function(){
				formMainForm=document.getElementById("form001");
				formButton=document.getElementById("quotesButton");
				errorMessage=document.getElementById("error_message_001");
				formFirstStage=document.getElementsByClassName("first_stage");
				formSecondStage=document.getElementsByClassName("second_stage");
				console.log(formButton);
				formButton.addEventListener("click",buttonClicked);
			}
			function buttonClicked(){
				if(formStage==0){
					checkForRequired(formFirstStage);
					if(formErrors==0){
						hideFirstStage();
						showSecondStage();
						formStage=1;
						formButton.innerHTML="GET MY QUOTES";
						formErrors==0;
					}
				}else{
					turnOnRequired(formSecondStage);
					checkForRequired(formSecondStage);
					if(formErrors==0){
						formButton.type="submit";
						setTimeout(function(){
							parent.document.location.href=thankYouPage},500);
					}
				}
				formErrors=0;
			}
			function hideFirstStage(){
				var i;
				for(i=0;i<formFirstStage.length;i++){
					formFirstStage[i].style.display='none';
				}
				errorMessage.style.visibility="hidden";
				errorMessage.style.displey="none";
			}
			function showSecondStage(){
				var i;
				for(i=0;i<formSecondStage.length;i++){
					formSecondStage[i].style.display='initial';
					formSecondStage[i].required=false;
				}
			}
			function turnOnRequired(stage){
				/*Hardcoded skips!!!*/
				var i;
				for(i=0;i<stage.length;i++){
					if(i!=3&&i!=7&&i!=12){
						formSecondStage[i].required=true;
					}
				}
			}
			function checkForRequired(stage){
				var i;
				if(!secondStageErrorTrigger){
				for(i=0;i<stage.length;i++){
					if(stage[i].required&&(stage[i].value==""||stage[i].value=="Select One")){
						stage[i].style.border="solid 1px red";
						stage[i].style["box-shadow"]="0px 0px 2px 0px red";
						formErrors++;
						if(formStage==0){
							errorMessage.style.visibility="visible";
							errorMessage.style.display="initial";
						}
					}
				}
				}
			}})();
		</script>
		<link rel='stylesheet' href='style_form_mobile.css'/>
	</head>
	<body>
		<form class="form_mobile" id="form001" action="" onsubmit="return false">
			<label class="input_label first_stage">Job Type</label>
			<select class="input_select first_stage" name="JobTypes" required >
				<option value="">Select One...</option>
				<option value="TreeRemovalSingleTree">Tree Removal Single Tree</option>
				<option value="TreeRemovalMultipleTrees">Tree Removal Multiple Trees</option>
				<option value="TreePruneSingleTree">Tree Prune - Single Tree</option>
				<option value="TreePruneMultipleTree">Tree Prune - Multiple Tree</option>
				<option value="PalmRemovalSingleTree">Palm Removal - Single Tree</option>
				<option value="PalmRemovalMultipleTrees">Palm Removal - Multiple Trees</option>
				<option value="PalmTrim">Palm Trim</option>
				<option value="StumpGrind">Stump Grind</option>
				<option value="LandClearing">Land Clearing</option>
				<option value="ArboristReports">Arborist Reports</option>
			</select>
			<label class="input_label first_stage ">Suburb</label>
			<input class="input_input first_stage" id='suburb' required placeholder="e.g. NewTown"/>

			<!--This is second stage-->
			<label class="input_label second_stage">Tree Size?</label>
			<select class="input_select second_stage" name="TreeSize">
				<option value="">Select One...</option>
				<option value="GreaterThan5meters">Greater than 5m</option>
				<option value="SmallerThan5meters">Smaller than 5m</option>
				<option value="MixOfSize">Mix of size</option>
				<option value="MixOfSize">Mix of size</option>
				<option value="Stumps">Stumps</option>
			</select>
			<label class="input_label second_stage">Job Description</label>
			<textarea class=" second_stage" id='jobDescription'placeholder="Tell us more about your tree(s)..."></textarea>

			<label class="input_label second_stage">First Name</label>
			<input class="input_input second_stage" id='FirstName' placeholder="First Name"/>
			<label class="input_label second_stage">E-mail</label>
			<input class="input_input second_stage" id='suburb' placeholder="Email"/>
			<label class="input_label second_stage">Best contact number</label>
			<input class="input_input second_stage" id='suburb' required placeholder="Best contact number"/>
			<label class="underlined_label second_stage">Email and number are used to give free quotes.</label>
			<label class="input_label second_stage">State</label>
			<select class="input_select second_stage" required name="CityName">
				<option value="">Select One...</option>
				<option value="NSW">NSW</option>
				<option value="VIC">VIC</option>
				<option value="ACT">ACT</option>
				<option value="QLD">QLD</option>
				<option value="SA">SA</option>
				<option value="WA">WA</option>
				<option value="NT">NT</option>
				<option value="TAS">TAS</option>
			</select>
			<button id="quotesButton" type="button">Yes! I Want My 3 Free Quotes</button>
			<p class="form_error_msg" id="error_message_001">There are errors on this page. Please fix them before continuing.</p>
		</form>
	</body>
</html>
