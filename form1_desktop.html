<!DOCTYPE html>
<html lang='en'>
	<head>
		<meta charset='UTF-8'/>
		<title>Form1</title>
		<script>
			(function(){
			var formButton;
			var formFirstStage;
			var formSecondStage;
			var formMainForm;
			var errorMessage;
			var formStage=0;
			var formErrors=0;
			var secondStageErrorTrigger=false;
			var thankYouPage="http://www.au.golandscapequotes.com.au/success1"
			window.onload=function(){
				formMainForm=document.getElementById("form001");
				formButton=document.getElementById("quotesButton");
				errorMessage=document.getElementById("error_message_001");
				formFirstStage=document.getElementsByClassName("first_stage");
				formSecondStage=document.getElementsByClassName("second_stage");
				console.log(formButton);
				formButton.addEventListener("click",buttonClicked);
			}
			function buttonClicked(){
				if(formStage==0){
					checkForRequired(formFirstStage);
					if(formErrors==0){
						hideFirstStage();
						showSecondStage();
						formStage=1;
						formButton.innerHTML="Get My Quotes";
						formErrors==0;
					}
				}else{
					turnOnRequired(formSecondStage);
					checkForRequired(formSecondStage);
					if(formErrors==0){
						formButton.type="submit";
						setTimeout(function(){
							parent.document.location.href=thankYouPage},500);
					}
				}
				formErrors=0;
			}
			function hideFirstStage(){
				var i;
				for(i=0;i<formFirstStage.length;i++){
					formFirstStage[i].style.display='none';
				}
				errorMessage.style.visibility="hidden";
			}
			function showSecondStage(){
				var i;
				for(i=0;i<formSecondStage.length;i++){
					formSecondStage[i].style.display='initial';
					formSecondStage[i].required=false;
				}
			}
			function turnOnRequired(stage){
				/*Hardcoded skips!!!*/
				var i;
				for(i=0;i<stage.length;i++){
					if(i!=3){
						formSecondStage[i].required=true;
					}
				}
			}
			function checkForRequired(stage){
				var i;
				if(!secondStageErrorTrigger){
				for(i=0;i<stage.length;i++){
					if(stage[i].required&&(stage[i].value==""||stage[i].value=="Select One")){
						stage[i].style.border="solid 1px red";
						stage[i].style["box-shadow"]="0px 0px 2px 0px red";
						formErrors++;
						errorMessage.style.visibility="visible";
					}
				}
				}
			}})();
		</script>
		<link rel='stylesheet' href='style_form_desktop.css'/>
	</head>
	<body>
		<form class="form_desktop" id="form001" action="" onsubmit="return false" >
			<label class="input_label first_stage">Job Type</label>
			<select class="input_select first_stage" name="JobTypes" autofocus value="Palms">
				<option value="">Select One</option>
				<option value="TreeRemovalSingleTree">Tree Removal Single Tree</option>
				<option value="TreeRemovalMultipleTrees">Tree Removal Multiple Trees</option>
				<option value="TreePruneSingleTree">Tree Prune - Single Tree</option>
				<option value="TreePruneMultipleTree">Tree Prune - Multiple Tree</option>
				<option value="PalmRemovalSingleTree">Palm Removal - Single Tree</option>
				<option value="PalmRemovalMultipleTrees">Palm Removal - Multiple Trees</option>
				<option value="PalmTrim">Palm Trim</option>
				<option value="StumpGrind">Stump Grind</option>
				<option value="LandClearing">Land Clearing</option>
				<option value="ArboristReports">Arborist Reports</option>
			</select>
			<label class="input_label first_stage">Tree Size</label>
			<select class="input_select first_stage" autofocus name="TreeSize">
				<option value="S">Select One</option>
				<option value="GreaterThan5meters">Greater than 5m</option>
				<option value="SmallerThan5meters">Smaller than 5m</option>
				<option value="MixOfSize">Mix of size</option>
				<option value="MixOfSize">Mix of size</option>
				<option value="Stumps">Stumps</option>
			</select>
			<label class="input_label first_stage ">Suburb</label>
			<input class="input_input first_stage" id='suburb' required placeholder="e.g. NewTown"/>
			<label class="input_label first_stage">Job Description</label>
			<textarea class=" first_stage" id='jobDescription'placeholder="Tell us more about your tree(s)..."></textarea>

			<!--This is second stage-->

			<label class="input_label second_stage">First Name</label>
			<input class="input_input second_stage" id='FirstName' placeholder="First Name"/>
			<label class="input_label second_stage">E-mail</label>
			<input class="input_input second_stage" id='suburb' placeholder="example@gmail.com"/>
			<label class="input_label second_stage">Best contact number</label>
			<input class="input_input second_stage" id='suburb' required placeholder="Best contact number"/>
			<label class="underlined_label second_stage">Why do you need my phone number?
				<div class="phone_hoover second_stage">We need your phone number so contractors are abel to contact you for more details or to possibly view the job.
				</div>
			</label>
			<label class="input_label second_stage">City</label>
			<select class="input_select second_stage" required name="CityName">
				<option value="">Select One</option>
				<option value="Sidney">Sidney</option>
				<option value="Melbourne">Melbourne</option>
				<option value="Adeliade">Adeliade</option>
				<option value="Brisbane">Brisbane</option>
				<option value="Gold Coast">Gold Coast</option>
				<option value="Sunshine Coast">Sunshine Coast</option>
				<option value="Newcastle-Maitland">Newcastle-Maitland</option>
				<option value="Central Coast">Central Coast</option>
				<option value="Canberra">Canberra</option>
				<option value="Wollongong">Wollongong</option>
				<option value="Hobraat">Hobraat</option>
			</select>
			<label class="input_label second_stage" id="almost_there">Almost there...</label>
			<div class="form_progress_bar01 second_stage"></div>
			<button id="quotesButton" type="button">Yes! I Want My 3 Free Quotes</button>
			<p class="form_error_msg" id="error_message_001">There are errors on this page. Please fix them before continuing.</p>
		</form>
	</body>
</html>
